{"version":3,"sources":["AnimatedLineGraph.tsx"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","View","StyleSheet","Reanimated","runOnJS","useAnimatedReaction","useSharedValue","useDerivedValue","cancelAnimation","withRepeat","withSequence","withTiming","withDelay","withSpring","GestureDetector","Canvas","LinearGradient","Path","Skia","vec","Group","mix","Circle","Shadow","SelectionDot","DefaultSelectionDot","createGraphPath","createGraphPathWithGradient","getGraphPathRange","getXInRange","getPointsInRange","getSixDigitHex","usePanGesture","getYForX","hexToRgba","INDICATOR_RADIUS","INDICATOR_BORDER_MULTIPLIER","INDICATOR_PULSE_BLUR_RADIUS_SMALL","INDICATOR_PULSE_BLUR_RADIUS_BIG","AnimatedLineGraph","points","allPoints","color","gradientFillColors","lineThickness","range","enableFadeInMask","enablePanGesture","onPointSelected","onGestureStart","onGestureEnd","panGestureDelay","enableIndicator","indicatorPulsating","horizontalPadding","Math","ceil","verticalPadding","TopAxisLabel","BottomAxisLabel","props","width","setWidth","height","setHeight","interpolateProgress","gesture","isActive","x","enabled","holdDuration","circleX","circleY","pathEnd","indicatorRadius","indicatorBorderRadius","value","pulseTrigger","indicatorPulseAnimation","indicatorPulseRadius","indicatorPulseOpacity","positions","min","onLayout","nativeEvent","layout","round","straightLine","path","Make","moveTo","i","y","cubicTo","paths","gradientPaths","commands","commandsChanged","setCommandsChanged","pointSelectedIndex","pathRange","pointsInRange","drawingWidth","lineWidth","lastPoint","length","max","date","indicatorX","floor","indicatorY","indicatorPulseColor","shouldFillGradient","gradientPath","createGraphPathProps","canvasHeight","canvasWidth","pathNew","gradientPathNew","toCmds","previous","from","to","interpolate","isInterpolatable","mass","stiffness","damping","velocity","gradientColors","stopPulsating","startPulsating","duration","setFingerPoint","fingerX","fingerXInRange","index","pointIndex","current","dataPoint","setFingerX","setIsActive","active","undefined","axisLabelContainerStyle","paddingTop","paddingBottom","indicatorVisible","styles","container","axisRow","svg","create","flex"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { View, StyleSheet, LayoutChangeEvent } from 'react-native'\nimport Reanimated, {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n  useDerivedValue,\n  cancelAnimation,\n  withRepeat,\n  withSequence,\n  withTiming,\n  withDelay,\n  withSpring,\n} from 'react-native-reanimated'\nimport { GestureDetector } from 'react-native-gesture-handler'\n\nimport {\n  Canvas,\n  SkPath,\n  LinearGradient,\n  Path,\n  Skia,\n  vec,\n  Group,\n  PathCommand,\n  mix,\n  Circle,\n  Shadow,\n} from '@shopify/react-native-skia'\n\nimport type { AnimatedLineGraphProps } from './LineGraphProps'\nimport { SelectionDot as DefaultSelectionDot } from './SelectionDot'\nimport {\n  createGraphPath,\n  createGraphPathWithGradient,\n  getGraphPathRange,\n  GraphPathRange,\n  getXInRange,\n  getPointsInRange,\n} from './CreateGraphPath'\nimport { getSixDigitHex } from './utils/getSixDigitHex'\nimport { usePanGesture } from './hooks/usePanGesture'\nimport { getYForX } from './GetYForX'\nimport { hexToRgba } from './utils/hexToRgba'\n\nconst INDICATOR_RADIUS = 7\nconst INDICATOR_BORDER_MULTIPLIER = 1.3\nconst INDICATOR_PULSE_BLUR_RADIUS_SMALL =\n  INDICATOR_RADIUS * INDICATOR_BORDER_MULTIPLIER\nconst INDICATOR_PULSE_BLUR_RADIUS_BIG =\n  INDICATOR_RADIUS * INDICATOR_BORDER_MULTIPLIER + 20\n\nexport function AnimatedLineGraph({\n  points: allPoints,\n  color,\n  gradientFillColors,\n  lineThickness = 3,\n  range,\n  enableFadeInMask,\n  enablePanGesture = false,\n  onPointSelected,\n  onGestureStart,\n  onGestureEnd,\n  panGestureDelay = 300,\n  SelectionDot = DefaultSelectionDot,\n  enableIndicator = false,\n  indicatorPulsating = false,\n  horizontalPadding = enableIndicator\n    ? Math.ceil(INDICATOR_RADIUS * INDICATOR_BORDER_MULTIPLIER)\n    : 0,\n  verticalPadding = lineThickness,\n  TopAxisLabel,\n  BottomAxisLabel,\n  ...props\n}: AnimatedLineGraphProps): React.ReactElement {\n  const [width, setWidth] = useState(0)\n  const [height, setHeight] = useState(0)\n  const interpolateProgress = useSharedValue(0)\n\n  const { gesture, isActive, x } = usePanGesture({\n    enabled: enablePanGesture,\n    holdDuration: panGestureDelay,\n  })\n  const circleX = useSharedValue(0)\n  const circleY = useSharedValue(0)\n  const pathEnd = useSharedValue(0)\n  const indicatorRadius = useSharedValue(enableIndicator ? INDICATOR_RADIUS : 0)\n  const indicatorBorderRadius = useDerivedValue(\n    () => indicatorRadius.value * INDICATOR_BORDER_MULTIPLIER\n  )\n\n  const pulseTrigger = useDerivedValue(() => (isActive.value ? 1 : 0))\n  const indicatorPulseAnimation = useSharedValue(0)\n  const indicatorPulseRadius = useDerivedValue(() => {\n    if (pulseTrigger.value === 0) {\n      return mix(\n        indicatorPulseAnimation.value,\n        INDICATOR_PULSE_BLUR_RADIUS_SMALL,\n        INDICATOR_PULSE_BLUR_RADIUS_BIG\n      )\n    }\n    return 0\n  })\n  const indicatorPulseOpacity = useDerivedValue(() => {\n    if (pulseTrigger.value === 0) {\n      return mix(indicatorPulseAnimation.value, 1, 0)\n    }\n    return 0\n  })\n\n  const positions = useDerivedValue(() => [\n    0,\n    Math.min(0.15, pathEnd.value),\n    pathEnd.value,\n    pathEnd.value,\n    1,\n  ])\n\n  const onLayout = useCallback(\n    ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n      setWidth(Math.round(layout.width))\n      setHeight(Math.round(layout.height))\n    },\n    []\n  )\n\n  const straightLine = useMemo(() => {\n    const path = Skia.Path.Make()\n    path.moveTo(0, height / 2)\n    for (let i = 0; i < width - 1; i += 2) {\n      const x = i\n      const y = height / 2\n      path.cubicTo(x, y, x, y, x, y)\n    }\n\n    return path\n  }, [height, width])\n\n  const paths = useSharedValue<{ from?: SkPath; to?: SkPath }>({})\n  const gradientPaths = useSharedValue<{ from?: SkPath; to?: SkPath }>({})\n  const commands = useSharedValue<PathCommand[]>([])\n  const [commandsChanged, setCommandsChanged] = useState(0)\n  const pointSelectedIndex = useRef<number>()\n\n  const pathRange: GraphPathRange = useMemo(\n    () => getGraphPathRange(allPoints, range),\n    [allPoints, range]\n  )\n\n  const pointsInRange = useMemo(\n    () => getPointsInRange(allPoints, pathRange),\n    [allPoints, pathRange]\n  )\n\n  const drawingWidth = useMemo(\n    () => width - 2 * horizontalPadding,\n    [horizontalPadding, width]\n  )\n\n  const lineWidth = useMemo(() => {\n    const lastPoint = pointsInRange[pointsInRange.length - 1]\n\n    if (lastPoint == null) return drawingWidth\n\n    return Math.max(getXInRange(drawingWidth, lastPoint.date, pathRange.x), 0)\n  }, [drawingWidth, pathRange.x, pointsInRange])\n\n  const indicatorX = useDerivedValue(\n    () => Math.floor(lineWidth) + horizontalPadding\n  )\n  const indicatorY = useDerivedValue(\n    () => getYForX(commands.value, indicatorX.value) || 0\n  )\n\n  const indicatorPulseColor = useMemo(() => hexToRgba(color, 0.4), [color])\n\n  const shouldFillGradient = gradientFillColors != null\n\n  useEffect(() => {\n    if (height < 1 || width < 1) {\n      // view is not yet measured!\n      return\n    }\n    if (pointsInRange.length < 1) {\n      // points are still empty!\n      return\n    }\n\n    let path\n    let gradientPath\n\n    const createGraphPathProps = {\n      pointsInRange,\n      range: pathRange,\n      horizontalPadding,\n      verticalPadding,\n      canvasHeight: height,\n      canvasWidth: width,\n    }\n\n    if (shouldFillGradient) {\n      const { path: pathNew, gradientPath: gradientPathNew } =\n        createGraphPathWithGradient(createGraphPathProps)\n\n      path = pathNew\n      gradientPath = gradientPathNew\n    } else {\n      path = createGraphPath(createGraphPathProps)\n    }\n\n    commands.value = path.toCmds()\n\n    if (gradientPath != null) {\n      const previous = gradientPaths.value\n      let from: SkPath = previous.to ?? straightLine\n      if (previous.from != null && interpolateProgress.value < 1)\n        from =\n          from.interpolate(previous.from, interpolateProgress.value) ?? from\n\n      if (gradientPath.isInterpolatable(from)) {\n        gradientPaths.value = {\n          from,\n          to: gradientPath,\n        }\n      } else {\n        gradientPaths.value = {\n          from: gradientPath,\n          to: gradientPath,\n        }\n      }\n    }\n\n    const previous = paths.value\n    let from: SkPath = previous.to ?? straightLine\n    if (previous.from != null && interpolateProgress.value < 1)\n      from = from.interpolate(previous.from, interpolateProgress.value) ?? from\n\n    if (path.isInterpolatable(from)) {\n      paths.value = {\n        from,\n        to: path,\n      }\n    } else {\n      paths.value = {\n        from: path,\n        to: path,\n      }\n    }\n\n    setCommandsChanged(commandsChanged + 1)\n\n    interpolateProgress.value = withSpring(1, {\n      mass: 1,\n      stiffness: 500,\n      damping: 400,\n      velocity: 0,\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    height,\n    horizontalPadding,\n    interpolateProgress,\n    pathRange,\n    paths,\n    shouldFillGradient,\n    gradientPaths,\n    pointsInRange,\n    range,\n    straightLine,\n    verticalPadding,\n    width,\n  ])\n\n  const gradientColors = useMemo(() => {\n    if (enableFadeInMask) {\n      return [\n        `${getSixDigitHex(color)}00`,\n        `${getSixDigitHex(color)}ff`,\n        `${getSixDigitHex(color)}ff`,\n        `${getSixDigitHex(color)}33`,\n        `${getSixDigitHex(color)}33`,\n      ]\n    }\n    return [\n      color,\n      color,\n      color,\n      `${getSixDigitHex(color)}33`,\n      `${getSixDigitHex(color)}33`,\n    ]\n  }, [color, enableFadeInMask])\n\n  const path = useDerivedValue(\n    () => {\n      const from = paths.value.from ?? straightLine\n      const to = paths.value.to ?? straightLine\n\n      return to.interpolate(from, interpolateProgress.value)\n    },\n    // RN Skia deals with deps differently. They are actually the required SkiaValues that the derived value listens to, not react values.\n    [interpolateProgress]\n  )\n\n  const gradientPath = useDerivedValue(\n    () => {\n      const from = gradientPaths.value.from ?? straightLine\n      const to = gradientPaths.value.to ?? straightLine\n\n      return to.interpolate(from, interpolateProgress.value)\n    },\n    // RN Skia deals with deps differently. They are actually the required SkiaValues that the derived value listens to, not react values.\n    [interpolateProgress]\n  )\n\n  const stopPulsating = useCallback(() => {\n    cancelAnimation(indicatorPulseAnimation)\n    indicatorPulseAnimation.value = 0\n  }, [indicatorPulseAnimation])\n\n  const startPulsating = useCallback(() => {\n    indicatorPulseAnimation.value = withRepeat(\n      withDelay(\n        1000,\n        withSequence(\n          withTiming(1, { duration: 1100 }),\n          withTiming(0, { duration: 0 }), // revert to 0\n          withTiming(0, { duration: 1200 }), // delay between pulses\n          withTiming(1, { duration: 1100 }),\n          withTiming(1, { duration: 2000 }) // delay after both pulses\n        )\n      ),\n      -1\n    )\n  }, [indicatorPulseAnimation])\n\n  const setFingerPoint = useCallback(\n    (fingerX: number) => {\n      const fingerXInRange = Math.max(fingerX - horizontalPadding, 0)\n\n      const index = Math.round(\n        (fingerXInRange /\n          getXInRange(\n            drawingWidth,\n            pointsInRange[pointsInRange.length - 1]!.date,\n            pathRange.x\n          )) *\n          (pointsInRange.length - 1)\n      )\n      const pointIndex = Math.min(Math.max(index, 0), pointsInRange.length - 1)\n\n      if (pointSelectedIndex.current !== pointIndex) {\n        const dataPoint = pointsInRange[pointIndex]\n        pointSelectedIndex.current = pointIndex\n\n        if (dataPoint != null) {\n          onPointSelected?.(dataPoint)\n        }\n      }\n    },\n    [\n      drawingWidth,\n      horizontalPadding,\n      onPointSelected,\n      pathRange.x,\n      pointsInRange,\n    ]\n  )\n\n  const setFingerX = useCallback(\n    (fingerX: number) => {\n      'worklet'\n\n      const y = getYForX(commands.value, fingerX)\n\n      if (y != null) {\n        circleX.value = fingerX\n        circleY.value = y\n      }\n\n      if (isActive.value) pathEnd.value = fingerX / width\n    },\n    // pathRange.x must be extra included in deps otherwise onPointSelected doesn't work, IDK why\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [circleX, circleY, isActive, pathEnd, pathRange.x, width, commands]\n  )\n\n  const setIsActive = useCallback(\n    (active: boolean) => {\n      indicatorRadius.value = withSpring(!active ? INDICATOR_RADIUS : 0, {\n        mass: 1,\n        stiffness: 1000,\n        damping: 50,\n        velocity: 0,\n      })\n\n      if (active) {\n        onGestureStart?.()\n        stopPulsating()\n      } else {\n        onGestureEnd?.()\n        pointSelectedIndex.current = undefined\n        pathEnd.value = 1\n        startPulsating()\n      }\n    },\n    [\n      indicatorRadius,\n      onGestureEnd,\n      onGestureStart,\n      pathEnd,\n      startPulsating,\n      stopPulsating,\n    ]\n  )\n\n  useAnimatedReaction(\n    () => x.value,\n    (fingerX) => {\n      if (isActive.value || fingerX) {\n        setFingerX(fingerX)\n        runOnJS(setFingerPoint)(fingerX)\n      }\n    },\n    [isActive, setFingerX, width, x]\n  )\n\n  useAnimatedReaction(\n    () => isActive.value,\n    (active) => {\n      runOnJS(setIsActive)(active)\n    },\n    [isActive, setIsActive]\n  )\n\n  useEffect(() => {\n    if (pointsInRange.length !== 0 && commands.value.length !== 0)\n      pathEnd.value = 1\n  }, [commands, pathEnd, pointsInRange.length])\n\n  useEffect(() => {\n    if (indicatorPulsating) {\n      startPulsating()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [indicatorPulsating])\n\n  const axisLabelContainerStyle = {\n    paddingTop: TopAxisLabel != null ? 20 : 0,\n    paddingBottom: BottomAxisLabel != null ? 20 : 0,\n  }\n\n  const indicatorVisible = enableIndicator && commandsChanged > 0\n\n  return (\n    <View {...props}>\n      <GestureDetector gesture={gesture}>\n        <Reanimated.View style={[styles.container, axisLabelContainerStyle]}>\n          {/* Top Label (max price) */}\n          {TopAxisLabel != null && (\n            <View style={styles.axisRow}>\n              <TopAxisLabel />\n            </View>\n          )}\n\n          {/* Actual Skia Graph */}\n          <View style={styles.container} onLayout={onLayout}>\n            {/* Fix for react-native-skia's incorrect type declarations */}\n            <Canvas style={styles.svg}>\n              <Group>\n                <Path\n                  // @ts-expect-error\n                  path={path}\n                  strokeWidth={lineThickness}\n                  style=\"stroke\"\n                  strokeJoin=\"round\"\n                  strokeCap=\"round\"\n                >\n                  <LinearGradient\n                    start={vec(0, 0)}\n                    end={vec(width, 0)}\n                    colors={gradientColors}\n                    positions={positions}\n                  />\n                </Path>\n\n                {shouldFillGradient && (\n                  <Path\n                    // @ts-expect-error\n                    path={gradientPath}\n                  >\n                    <LinearGradient\n                      start={vec(0, 0)}\n                      end={vec(0, height)}\n                      colors={gradientFillColors}\n                    />\n                  </Path>\n                )}\n              </Group>\n\n              {SelectionDot != null && (\n                <SelectionDot\n                  isActive={isActive}\n                  color={color}\n                  lineThickness={lineThickness}\n                  circleX={circleX}\n                  circleY={circleY}\n                />\n              )}\n\n              {indicatorVisible && (\n                <Group>\n                  {indicatorPulsating && (\n                    <Circle\n                      cx={indicatorX}\n                      cy={indicatorY}\n                      r={indicatorPulseRadius}\n                      opacity={indicatorPulseOpacity}\n                      color={indicatorPulseColor}\n                      style=\"fill\"\n                    />\n                  )}\n\n                  <Circle\n                    cx={indicatorX}\n                    cy={indicatorY}\n                    r={indicatorBorderRadius}\n                    color=\"#ffffff\"\n                  >\n                    <Shadow dx={2} dy={2} color=\"rgba(0,0,0,0.2)\" blur={4} />\n                  </Circle>\n                  <Circle\n                    cx={indicatorX}\n                    cy={indicatorY}\n                    r={indicatorRadius}\n                    color={color}\n                  />\n                </Group>\n              )}\n            </Canvas>\n          </View>\n\n          {/* Bottom Label (min price) */}\n          {BottomAxisLabel != null && (\n            <View style={styles.axisRow}>\n              <BottomAxisLabel />\n            </View>\n          )}\n        </Reanimated.View>\n      </GestureDetector>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  svg: {\n    flex: 1,\n  },\n  container: {\n    flex: 1,\n  },\n  axisRow: {\n    height: 17,\n  },\n})\n"]}